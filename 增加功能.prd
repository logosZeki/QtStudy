# 图形样式调整功能需求说明文档

## 1. 背景概述

当前软件的开始栏下方有一排顶部菜单栏，其中包含多个按钮/下拉框/QAction用于实现图形样式调整功能。这些控件均在MainWindow的m_mainToolbar组件中已经存在，但部分功能尚未实现。本需求文档旨在详细描述需要实现的"填充颜色"和"线条颜色"功能。

## 2. 功能要求

### 2.1 填充颜色功能

- **功能描述**：实现"填充颜色"按钮的功能，用于更改选中图形的内部填充颜色
- **交互流程**：
  1. 用户选中需要修改的图形
  2. 点击"填充颜色"按钮
  3. 系统弹出QColorDialog对话框
  4. 用户从对话框中选择所需颜色
  5. 用户点击确认按钮
  6. 系统将所选颜色应用到图形内部的填充区域

### 2.2 线条颜色功能

- **功能描述**：实现"线条颜色"按钮的功能，用于更改选中图形的外部轮廓颜色
- **交互流程**：
  1. 用户选中需要修改的图形
  2. 点击"线条颜色"按钮
  3. 系统弹出QColorDialog对话框
  4. 用户从对话框中选择所需颜色
  5. 用户点击确认按钮
  6. 系统将所选颜色应用到图形外部轮廓

### 2.3 按钮状态控制

- **未选中图形时**：
  - "填充颜色"按钮呈灰色，处于禁用状态，点击无效
  - "线条颜色"按钮呈灰色，处于禁用状态，点击无效
  
- **选中图形时**：
  - "填充颜色"按钮恢复正常颜色，处于激活状态，可以正常使用
  - "线条颜色"按钮恢复正常颜色，处于激活状态，可以正常使用

## 3. 技术要求

- 使用QColorDialog实现颜色选择对话框
- 按钮状态需根据图形选中状态动态更新
- 实现过程中需遵循SOLID设计原则
- 新增功能不得影响其他已实现的功能
- 代码应当具有良好的可维护性和可扩展性

## 4. 实现注意事项

- 需要监听图形选中状态的变化，及时更新按钮状态
- 颜色更改操作应当可撤销/重做
- 颜色选择对话框应保持与系统风格一致
- 颜色应用后需立即更新视图以反映变化

## 5. 验收标准

- 能够成功选中图形并通过按钮更改填充颜色
- 能够成功选中图形并通过按钮更改线条颜色
- 未选中图形时按钮正确禁用
- 选中图形时按钮正确激活
- 所有操作符合交互流程描述
- 代码符合SOLID原则
- 不影响其他已实现功能
