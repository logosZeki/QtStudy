# PageSetting功能改进需求说明书

## 1. 项目概述

本文档描述了对PageSetting页面组成及功能的改进需求，主要涉及网格大小设置、线条粗细设置以及页面尺寸设置的优化。

## 2. 功能需求

### 2.1 网格大小设置改进

#### 当前状态：
- 网格大小通过直接输入像素值(px)进行设置

#### 改进需求：
- 将网格大小设置改为下拉框选择方式
- 提供四个预设挡位：小、正常、大、很大
- 每个挡位在下拉框中同时显示对应的像素值
- 如果用户没有手动调整页面网格，点击应用按钮时页面网格保持原样

### 2.2 线条粗细设置改进

#### 当前状态：
- 线条粗细通过直接输入值进行设置

#### 改进需求：
- 将线条粗细设置改为下拉框选择方式
- 提供三个预设挡位：
  - 细(0.5px)
  - 正常(1px)
  - 粗(2px)
- 如果用户没有手动调整线条粗细，点击应用按钮时线条粗细保持原样

### 2.3 页面尺寸设置改进

#### 当前状态：
- 页面尺寸通过直接输入宽度和高度进行设置

#### 改进需求：
- 新增页面尺寸预设选项栏，提供三个标准尺寸选项：A3、A4、A5
- 选择预设尺寸时，自动更新m_widthSpin和m_heightSpin中的像素值
- 勾选m_customSizeCheck后，用户可以在m_widthSpin和m_heightSpin中手动输入目标尺寸
- m_pixelInfoLabel中显示绘图区域的实际尺寸
- 如果用户没有手动调整页面尺寸，点击应用按钮时页面尺寸保持原样

## 3. 用户界面设计

### 3.1 网格大小下拉框
- 标签：网格大小
- 控件类型：下拉框
- 选项：
  - 小 (xx px)
  - 正常 (xx px)
  - 大 (xx px)
  - 很大 (xx px)

### 3.2 线条粗细下拉框
- 标签：线条粗细
- 控件类型：下拉框
- 选项：
  - 细 (0.5px)
  - 正常 (1px)
  - 粗 (2px)

### 3.3 页面尺寸区域
- 预设尺寸选项：
  - 单选按钮：A3
  - 单选按钮：A4
  - 单选按钮：A5
- 自定义尺寸选项：
  - 复选框：m_customSizeCheck（自定义尺寸）
  - 数字输入框：m_widthSpin（宽度，单位：px）
  - 数字输入框：m_heightSpin（高度，单位：px）
- 信息显示：
  - 标签：m_pixelInfoLabel（显示绘图区域实际尺寸）

## 4. 行为规则

1. 当用户选择预设的网格大小或线条粗细时，相应的设置将立即在界面上更新显示
2. 当用户选择预设的页面尺寸(A3/A4/A5)时，m_widthSpin和m_heightSpin的值将自动更新
3. 只有当用户勾选m_customSizeCheck后，才能手动编辑m_widthSpin和m_heightSpin
4. 应用按钮点击规则：
   - 如果用户没有手动调整网格大小，网格大小保持原样
   - 如果用户没有手动调整线条粗细，线条粗细保持原样
   - 如果用户没有手动调整页面尺寸，页面尺寸保持原样
   - 只有用户手动调整过的设置才会被应用

## 5. 技术要求

1. 需要修改现有的PageSetting界面代码，增加新的控件和逻辑
2. 需要保存用户的手动调整状态，以判断是否应用新设置
3. 预设尺寸A3、A4、A5的像素值需要根据应用的DPI设置进行合理换算

## 6. 测试要求

1. 测试所有预设选项是否正确显示和工作
2. 测试自定义尺寸输入是否正常工作
3. 测试应用按钮在各种设置组合下是否按预期工作
4. 测试未手动调整的设置是否正确保持原样
