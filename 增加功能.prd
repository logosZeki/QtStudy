# 图形编辑器功能增强需求说明书

## 1. 文档信息

- 文档版本：1.0
- 创建日期：2024年
- 状态：待实现

## 2. 需求概述

本文档描述对现有图形编辑器的功能增强需求，主要包括透明度调节、线条粗细设置以及线条样式设置三个功能模块。这些功能将增强用户对图形外观的精细控制能力。

## 3. 功能详细需求

### 3.1 透明度调节功能

#### 3.1.1 基本描述
实现transparencyCombo组件，用于调整文本框及图形的透明度。

#### 3.1.2 详细规格
- 影响范围：该透明度设置将影响图形的填充颜色、轮廓线条以及文字的透明度
- 调节范围：0% - 100%
- 调节精度：每10%为一个档位（0%, 10%, 20%, ..., 90%, 100%）
- 界面要求：以下拉组合框形式呈现，显示当前透明度百分比
- 默认值：100%（完全不透明）

#### 3.1.3 交互行为
- 用户选择透明度后，所选图形的透明度应立即更新
- 多选图形时，统一设置所有选中图形的透明度

### 3.2 线条粗细设置功能

#### 3.2.1 基本描述
实现"线条粗细"下拉框，用于调整图形轮廓线条的粗细。

#### 3.2.2 详细规格
- 可选值：
  - 0px（无线条）
  - 0.5px
  - 1px
  - 1.5px
  - 2px
  - 3px
  - 4px
  - 5px
  - 6px
  - 8px
  - 10px
- 界面要求：以下拉列表形式呈现，显示当前选中的线条粗细值
- 默认值：1px

#### 3.2.3 交互行为
- 用户选择线条粗细后，所选图形的线条粗细应立即更新
- 多选图形时，统一设置所有选中图形的线条粗细

### 3.3 线条样式设置功能

#### 3.3.1 基本描述
实现"线条样式"下拉框，用于调整图形轮廓线条的样式。

#### 3.3.2 详细规格
- 可选样式：
  - 实线（默认）
  - 虚线样式一：`setDashPattern(pattern << 1.0 << 1.0)`
  - 虚线样式二：`setDashPattern(pattern << 8.0 << 3.0)`
  - 虚线样式三：`setDashPattern(pattern << 7.0 << 3.0 << 2.0 << 3.0)`
- 界面要求：
  - 以下拉列表形式呈现
  - 每种样式应有图形化预览
  - 显示当前选中的线条样式
- 默认值：实线

#### 3.3.3 交互行为
- 用户选择线条样式后，所选图形的线条样式应立即更新
- 多选图形时，统一设置所有选中图形的线条样式

## 4. 设计原则与约束

### 4.1 SOLID原则实现要求

实现以上功能时，应遵循SOLID设计原则：

#### 4.1.1 单一职责原则 (Single Responsibility Principle)
- 每个类应只负责一个功能模块，例如透明度控制、线条粗细控制和线条样式控制应分别由独立的类负责

#### 4.1.2 开闭原则 (Open/Closed Principle)
- 设计应对扩展开放，对修改关闭
- 例如，未来若需添加新的线条样式，应无需修改现有代码

#### 4.1.3 里氏替换原则 (Liskov Substitution Principle)
- 任何基类可以被其子类替换，且不影响程序正确性
- 确保图形属性设置相关的接口设计符合此原则

#### 4.1.4 接口隔离原则 (Interface Segregation Principle)
- 设计特定的接口，而非单一的大接口
- 例如，透明度设置接口、线条粗细设置接口和线条样式设置接口应分离

#### 4.1.5 依赖倒置原则 (Dependency Inversion Principle)
- 高层模块不应依赖低层模块，都应依赖于抽象
- 抽象不应依赖于细节，细节应依赖于抽象

## 5. 界面设计建议

- 这三个功能控件应集中放置在属性面板中的"外观"或"样式"分组下
- 控件布局应简洁明了，便于用户快速找到和使用
- 控件状态应随所选图形的当前属性而变化，反映当前设置

## 6. 测试要点

- 各控件在不同分辨率和操作系统下的显示效果
- 透明度、线条粗细和线条样式组合使用的效果
- 设置保存和加载时的正确性
- 与其他图形属性设置的兼容性


